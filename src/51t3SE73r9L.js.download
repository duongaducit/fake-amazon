(function(k){var h=window.AmazonUIPageJS||window.P,G=h._namespace||h.attributeErrors,q=G?G("PackageTrackingAssets",""):h;q.guardFatal?q.guardFatal(k)(q,window):q.execute(function(){k(q,window)})})(function(k,h,G){function q(a,b){return{action:a,trackingId:b.trackingId,csrfToken:b.csrfToken}}function O(a){return{deviceType:a.deviceType,feedbackSuccessHeading:a.feedbackSuccessHeading,feedbackSuccessMessage:a.feedbackSuccessMessage,optOutSuccessHeading:a.optOutSuccessHeading,optOutSuccessMessage:a.optOutSuccessMessage,
feedbackErrorHeading:a.feedbackErrorHeading,feedbackErrorMessage:a.feedbackErrorMessage,optOutErrorHeading:a.optOutErrorHeading,optOutErrorMessage:a.optOutErrorMessage}}function t(a,b,c,f,e){b=b("#photoOnDelivery-alert");"1"===e?(b.heading(c),b.text(f),b.type("success")):(b.heading(c),b.text(f),b.type("error"));a("#photoOnDelivery-alert").css("display","block")}function u(a,b){k.when("a-secondary-view").execute(function(a){(a=a.get(b))&&a.hide()})}function v(a,b){k.when("a-modal").execute(function(a){(a=
a.get(b))&&a.hide()})}function P(a){return!a||0===a.length||!a.trim()}"use strict";k.when("A","pt2-csm-metrics-utils","ready").register("emit-edd-in-the-past-csm-metrics",function(a,b){a=a.$;a("#pt2-get-refund-connection").length&&b.incrementCount("pt2-get-refund-connection-shown");a("#pt2-get-replacement-connection").length&&b.incrementCount("pt2-get-replacement-connection-shown");a("#pt2-get-replacement-or-refund-connection").length&&b.incrementCount("pt2-get-replacement-or-refund-connection-shown");
a=a("#pt2-contact-us-connection");a.length&&b.incrementCount("pt2-contact-us-"+a.data("reason"))});"use strict";k.when("A","ready").register("page-load",function(a){var b=a.$;setTimeout(function(){b("#pageContainer").removeClass("fade-out")},300);return{loadedAt:(new Date).getTime()}});k.when("A","ready").register("iphone-x-fix",function(a){a=a.$;var b=/iPhone/.test(navigator.userAgent)&&!h.MSStream,c=h.devicePixelRatio||1,f=h.screen.width*c,c=h.screen.height*c;b&&1125==f&&2436===c&&a("#pageContainer").addClass("iphone-x")});
"use strict";k.when("A","ready").register("pt2-page-utils",function(a){return{modifyPageScrollStatus:function(b){var c,f=a.$("#a-page"),e=a.$("body");b?(c=e.scrollTop(),a.requestAnimationFrame(function(){f.css({position:"fixed",top:"-"+c+"px"})},f[0])):a.requestAnimationFrame(function(){f.css({position:"",top:""});e.scrollTop(c)},f[0])}}});k.when("A","pt2-csm-metrics-utils","ready").register("sign-in-again-or-do",function(a,b){var c=-1!==h.location.host.indexOf("hp-shoppingportal")?"/portal/cstrac/progress-tracker/actions/is-authenticated":
"/progress-tracker/package/actions/is-authenticated",f;return function(e,b,d,n,E){a.post(c,{params:{csrfToken:n.csrfToken},success:function(a){a.success&&a.value?E&&E():a.success?(a=e.$currentTarget,n.width=620>h.innerWidth?.75*h.innerWidth:600,n.name=d,n.dataStrategy="preload",f||(f=b.create(a,n)),f.update({header:n.header||""}).show()):console.log("service failed")},error:function(a){}})}});k.when("A","map-tracking-status","response-code","pt2-csm-metrics-utils","ready").register("map-tracking-memoization",
function(a,b,c,f){var e=-1!==h.location.host.indexOf("hp-shoppingportal")?"/portal/cstrac/progress-tracker/actions/map-tracking/memoize":"/progress-tracker/package/actions/map-tracking/memoize";return function(b,d,c,E,l){function m(b){a.post(e,{params:p,success:function(a){f.stopWidgetTimer("map-tracking-memoization-ajax-call");f.incrementCount("map-tracking-memoization-succeeded");a.success&&a.value?E&&E(a.value):l&&l(a.responseCode)},error:function(a){3>b?(f.incrementCount("map-tracking-memoization-attempt-"+
(b+2)),setTimeout(function(){m(b+1)},0)):(f.logError({feature:"map-tracking-memoization-ajax-call",message:a.responseCode}),f.incrementCount("map-tracking-memoization-failed"),l&&l(a.responseCode))}})}var p={trackingId:d.trackingId,status:b.status,csrfToken:h.csrfToken,numberOfMemoizations:c,isDriverPhotoPresent:!0===d.mapTracking.isDriverPhotoPresent,transporterId:d.mapTracking.transporterId,driverNameTitle:d.mapTracking.driverNameTitle};if(c=parseInt(b.stops,10))p.stops=c;d.timezone&&(p.timezone=
d.timezone);d.customerId&&(p.customerId=d.customerId);d.visitTrigger&&(p.visitTrigger=d.visitTrigger);b.lastStopsRemainingDecreaseTime&&(p.lastStopsRemainingDecreaseTime=1E3*b.lastStopsRemainingDecreaseTime);f.startWidgetTimer("map-tracking-memoization-ajax-call");m(0)}});k.when("A","map-tracking-status","response-code","pt2-csm-metrics-utils","ready").register("map-tracking-confirmation",function(a,b,c,f){var e=-1!==h.location.host.indexOf("hp-shoppingportal")?"/portal/cstrac/progress-tracker/actions/map-tracking/confirm":
"/progress-tracker/package/actions/map-tracking/confirm";return function(c,d,n){function E(){function b(c){a.post(e,{params:l,success:function(a){f.stopWidgetTimer("map-tracking-confirmation-ajax-call");f.incrementCount("map-tracking-confirmation-succeeded");d&&d(a.value)},error:function(a){3>c?(f.incrementCount("map-tracking-confirmation-attempt-"+(c+2)),setTimeout(function(){b(c+1)},0)):(f.logError({feature:"map-tracking-confirmation-ajax-call",message:a.responseCode}),f.incrementCount("map-tracking-confirmation-failed"),
n&&n(a.responseCode),setTimeout(E,3E5))}})}f.startWidgetTimer("map-tracking-confirmation-ajax-call");b(0)}var l={trackingId:c.trackingId,status:b.DELIVERED,csrfToken:h.csrfToken};c.timezone&&(l.timezone=c.timezone);c.customerId&&(l.customerId=c.customerId);c.visitTrigger&&(l.visitTrigger=c.visitTrigger);setTimeout(E,3E5)}});k.when("A","ready").register("map-tracking-status",function(a){return{RENDERED:"RENDERED",OUT_FOR_DELIVERY:"OUT_FOR_DELIVERY",PICKED_UP:"PICKED_UP",YOU_ARE_NEXT:"YOU_ARE_NEXT",
DELIVERED:"DELIVERED",DELIVERED_CONFIRMED:"DELIVERED_CONFIRMED",ERROR:"ERROR",FATAL:"FATAL",ADDRESS_NOT_FOUND:"ADDRESS_NOT_FOUND",SKIPPED_STOP:"SKIPPED_STOP",DELIVERY_FAILED:"DELIVERY_FAILED",PARTIALLY_DELIVERED:"PARTIALLY_DELIVERED",DELIVERY_ATTEMPTED:"DELIVERY_ATTEMPTED",NOT_DELIVERED:"NOT_DELIVERED",REJECTED:"REJECTED",UNKNOWN:"UNKNOWN"}});k.when("A","ready").register("response-code",function(a){return{UNSTRUSTED_REQUEST:"UNSTRUSTED_REQUEST",INVALID_TOKEN:"INVALID_TOKEN",AUTHENTICATED:"AUTHENTICATED",
NOT_AUTHENTICATED:"NOT_AUTHENTICATED",MISSING_INPUTS:"MISSING_INPUTS",SUCCESS:"SUCCESS",SERVICE_FAILED:"SERVICE_FAILED",UNKNOWN_ACTION:"UNKNOWN_ACTION"}});k.when("A","ready").register("cookie-monster",function(a){function b(a){return(decodeURIComponent(document.cookie).match(new RegExp(a+"\x3d([^;]+)"))||["",""])[1]}return{get:b,getJson:function(a){a=b(a);if(!a)return{};try{return JSON.parse(a)}catch(f){return{}}},set:function(a,b,e){if(a){if(e&&0<e){var g=new Date;g.setTime(g.getTime()+864E5*e);
document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+"; expires\x3d"+g.toUTCString()+";path\x3d/"}else document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+";path\x3d/";return!0}return!1},remove:function(a){return a?(document.cookie=encodeURIComponent(a)+"\x3d; expires\x3dSat, 19 Jan 1974 01:00:00 GMT",!0):!1}}});k.when("A","ready").register("failsafe",function(a){function b(a){g=a;l=(new Date).getTime();h=setTimeout(function(){n=!0;d()},g)}function c(){h&&clearTimeout(h);
h=null}var f,e,g,d,n=!1,h=null,l=null,m=null;return{init:function(a){a=a||{};f=a.initialDelay||3500;e=a.extension||500;d=a.onTimeout||function(){};m=(new Date).getTime();b(f)},reset:c,extend:function(){if(!n){var a=(new Date).getTime()-l,a=g-a+e;c();0<a&&b(a)}},hasFired:function(){return n},totalElapsedTime:function(){return(new Date).getTime()-m}}});k.when("A","ready").register("preload-images",function(a){function b(a){b.list||(b.list=[]);for(var f=b.list,e=0;e<a.length;e++){var g=new Image;g.onload=
function(){var a=f.indexOf(this);-1!==a&&f.splice(a,1)};f.push(g);g.src=a[e]}}return{preloadImages:b}});"use strict";k.register("pt2-csm-metrics-utils",function(){var a,b;try{a=navigator.userAgent}catch(e){a=""}a&&(a=a.toLowerCase(),(a=a.match(/(chrome|firefox|safari|trident|ddge|opr|crios|fxios)/gi))&&0<a.length&&(-1<a.indexOf("safari")&&1<a.length?-1<a.indexOf("chrome")||-1<a.indexOf("crios")?b="chrome":-1<a.indexOf("fxios")&&(b="firefox"):b=a[0]));var c=[],f=function(a){h.ue&&h.uex&&uex("ld",a,
{wb:1});a=c.indexOf(a);-1<a&&c.splice(a,1)};h.addEventListener("beforeunload",function(a){for(;0<c.length;)f(c[0])});return{setScope:function(a){h.ue&&h.uet&&h.uet("tc",a);return a},setPreAjax:function(a){h.ue&&h.ues&&h.ues("t0",a,new Date)},setPostAjax:function(a){h.ue&&h.uet&&h.uet("be",a)},sendAjaxMetrics:function(a){h.ue&&h.uex&&h.uex("ld",a)},recordReftag:function(a,b){a.ajax({type:"POST",url:"/gp/mobile/tag?"+b,success:function(a){console.log("record ref tag ajax call success: ",a)},error:function(a){console.log("ref tag ajax call error: ",
a)}})},logFatal:function(a){if(h.ueLogError){var b=a.feature||"pt2-fatal-generic";h.ueLogError(a.error||{message:a.message||b},{logLevel:"FATAL",attribution:b})}},logError:function(a){if(h.ueLogError){var b=a.feature||"pt2-error-generic";h.ueLogError(a.error||{message:a.message||b},{logLevel:"ERROR",attribution:b})}},logWarn:function(a){if(h.ueLogError){var b=a.feature||"pt2-warn-generic";h.ueLogError(a.error||{message:a.message||b},{logLevel:"WARN",attribution:b})}},incrementCount:function(a,c){h.ue&&
h.ue.count&&(h.ue.count(a,(h.ue.count(a)||0)+1),c&&c.browser&&b&&h.ue.count(a+"-"+b,(h.ue.count(a+"-"+b)||0)+1))},startWidgetTimer:function(a){h.ue&&h.uet&&0>c.indexOf(a)&&(uet("bb",a,{wb:1}),c.push(a))},stopWidgetTimer:f}});"use strict";k.when("A","ready").register("redirect-countdown-utils",function(a){var b=a.$,c=function(){a.interval(function(){var a=b("#pt-error-second-timer"),e=parseInt(a.data("seconds"));e--;a.data("seconds",e);0<=a.data("seconds")&&a.html(e)},1E3)};b("#pt-error-second-timer")&&
c()});"use strict";k.when("A","pt2-csm-metrics-utils","a-tooltip","ready").register("pt2-tooltip",function(a,b,c){function f(a){b.incrementCount(a+"-total");n&&(b.incrementCount(a+"-unique"),n=!1)}function e(a){g("body").addClass("pt2-tooltip-style-override "+d.deviceType);g(".pt2-tooltip-trigger."+a).attr("title","")}var g=a.$,d=a.state("page-state")||{},n=!0,h=function(b){a.declarative("a-tooltip","mouseenter",function(a){e(b);f(b)})},l=function(b){a.declarative("a-tooltip","click",function(a){e(b);
a=g(".pt2-tooltip-trigger."+b);a=c.get(a);a.isVisible()?a.hide():f(b)})};return function(a){"desktop"===d.deviceType?h(a):l(a)}});"use strict";k.when("A","ready").register("BarAnimationController",function(a){a=function(a){this.options=a||{};this.currentBarIndex=0;this.animationDuration=a.animationDuration||200;this.lastAnimationDuration=a.lastAnimationDuration||800;this.numberOfReached=a.numberOfReached;this.completionPercentage=a.completionPercentage||50;this.onAllBarsDone=a.onAllBarsDone};a.prototype.animateOneBar=
function(){var a=this,c=a.currentBarIndex<a.numberOfReached-1?100:a.completionPercentage,f=a.currentBarIndex<a.numberOfReached-1?a.animationDuration:a.lastAnimationDuration*a.completionPercentage/100;a.options.renderOneBar&&a.options.renderOneBar({index:a.currentBarIndex,height:c,duration:f,lastReached:a.currentBarIndex===a.numberOfReached-1,onComplete:function(){if(a.currentBarIndex<a.numberOfReached-1)a.currentBarIndex++,a.animateOneBar();else if(a.onAllBarsDone)a.onAllBarsDone({index:a.currentBarIndex})}})};
a.prototype.startAnimation=function(){this.animateOneBar()};return a});"use strict";k.when("A","milestone-selectors","BarAnimationController","ready").register("BarAnimation",function(a,b,c){var f=a.state("page-state")||{};if(f.progressTracker){var e=a.$,g=e(b.milestoneBars),d=e(b.milestoneMarkers),n=new c({numberOfReached:f.progressTracker.numberOfReachedMilestones,completionPercentage:f.progressTracker.lastTransitionPercentComplete,animationDuration:150,lastAnimationDuration:1500,renderOneBar:function(a){var b=
e(d[a.index]),c=b.closest(".milestone");b.animate({opacity:.3},100,function(){c.removeClass("notReached").addClass("reached");a.lastReached&&c.addClass("lastReached");b.animate({opacity:1},200)});e(g[a.index]).animate({height:a.height+"%"},a.duration,"linear",function(){a.onComplete()})},onAllBarsDone:function(){}});setTimeout(function(){n.startAnimation()},1E3)}});"use strict";k.declare("milestone-selectors",{milestoneBars:".js-milestone-bar",milestoneMarkers:".milestone-marker"});"use strict";k.when("A",
"ready").register("stickyTop",function(a){function b(a){var d=e.offset().top;c(h).scrollTop()>d?g.hasClass(a)||g.addClass(a):g.hasClass(a)&&g.removeClass(a);setTimeout(function(){b(a)},10)}var c=a.$,f=a.state("page-state")||{},e=c("#pageContainer"),g=c("#stickyTop-container"),d=g.height();"mobile"===f.deviceType&&a.on.load(function(){c("#staticContent-container").css("margin-top",d);f.progressTracker&&b("sticky");f.isLexicalExceptionMessagePresent&&b("sticky-lexical");(!f.progressTracker&&!f.isLexicalExceptionMessagePresent||
f.pickUpInformation||"DELIVERED"===f.lastReachedMilestone)&&g.addClass("no-progress")})});"use strict";k.when("A","a-sheet","pt2-page-utils","pt2-csm-metrics-utils","ready").register("configure-tracking-event-bsheet",function(a,b,c,f){var e=a.$,g;a.declarative("tracking-events-open-bottom-sheet",["click"],function(d){var c=d.$currentTarget.find("a").data("ref");g||(d=a.extend({},d.data),d.height=.75*h.innerHeight,d.preloadDomId="tracking-events-container",d.name="tracking-events-bottom-sheet",d.sheetType=
"web",d.closeType="icon",g=b.create(d));g.show();f.recordReftag(e,c)});a.on("a:sheet:beforeShow:tracking-events-bottom-sheet",function(a){c.modifyPageScrollStatus(!0)});a.on("a:sheet:beforeHide:tracking-events-bottom-sheet",function(a){c.modifyPageScrollStatus(!1)})});"use strict";k.when("A","a-modal","pt2-csm-metrics-utils","ready").register("configure-tracking-event-modal",function(a,b,c){var f=a.$,e;a.declarative("tracking-events-open-modal","click",function(g){var d=g.$currentTarget,n=d.find("a").data("ref");
e||(g=a.extend({},g.data),g.width=620>h.innerWidth?.75*h.innerWidth:600,g.name="tracking-events-modal",g.dataStrategy="preload",g.padding="none",g.hideHeader=!0,e=b.create(d,g));e.show();c.recordReftag(f,n)})});"use strict";k.when("A","a-secondary-view","pt2-csm-metrics-utils","ready").register("configure-tracking-event-secondary-view",function(a,b,c){var f=a.$,e;a.declarative("tracking-events-open-secondary-view",["click","touchend"],function(g){var d=g.$currentTarget,n=d.find("a").data("ref");e||
(g=a.extend({},g.data),g.name="tracking-events-secondary-view",g.dataStrategy="preload",e=b.create(d,g));e.show();c.recordReftag(f,n)})});"use strict";k.when("A","page-load","map-tracking-memoization","map-tracking-confirmation","map-tracking-status","response-code","pt2-csm-metrics-utils","failsafe","maptracker-url","ready").register("MapTracking",function(a,b,c,f,e,g,d,n,k){h.jQuery=a.$;var l=a.state("page-state")||{},m=l.distanceFromDeliveryCutoffTime;if(l.mapTracking){var p=a.$("#mapTracking-container");
if(0<p.length){var r={browser:!0};try{var C=a.$("#staticContent-behindMap"),w=a.$("#staticContent-belowMap"),Y=a.$("#split-container"),Z=a.$("#itemImages-container-forMapTracking"),y=a.$("#mapShowLink-container"),Q=a.$("#mapTracking-unavailableMessage"),x=a.$("#mapTracking-freshness").length?a.$("#mapTracking-freshness"):{html:function(){d.incrementCount("map-tracking-error-freshness");d.logError({feature:"map-tracking-error",message:"#mapTracking-freshness does not exist for "+l.trackingId})}},z=
a.$("#mapTracking-bottomSheet-trigger"),A=a.$("#mapHideLink-container"),R=a.$("#primaryStatus"),I=a.$("#secondaryStatus").length?a.$("#secondaryStatus"):{html:function(){d.incrementCount("map-tracking-error-secondary-status");d.logError({feature:"map-tracking-error",message:"#secondaryStatus does not exist for "+l.trackingId})}},B=a.$("#nav-upnav"),q=a.$("header"),t=a.$("#stickyTop-container"),ea=a.$("#signInAgain-container .signInAgain-phrase-with-link"),ma=0<a.$("#lexicalProgressTracker-container").length;
k=function(){d.incrementCount("map-tracking-error-map-tracker");d.logError({feature:"map-tracking-error",message:"#mapTracker does not exist for "+l.trackingId})};var aa=a.$("#mapTracker").length?a.$("#mapTracker"):{animate:k,css:k},fa=!1;if("mobile"===l.deviceType){k=0;0<B.length&&(k+=B.height());0<q.length&&(k+=q.height());0<t.length&&(k+=t.height());0<z.length&&(k+=z.outerHeight());var V=a.$("#pageContainer").hasClass("iphone-x")?a.$(h).height()-k+34:a.$(h).height()-k;aa.css("height",V-(l.mapTracking.rendersSurveyLink?
30:0));x.addClass("mobile")}a.$.getScript(l.mapTracking.url||"https://d34zfp2ojglz50.cloudfront.net/MapTracker.js",function(k,E,q){function B(){p.show();fa||(n.init({initialDelay:3500,extension:500,onTimeout:function(){L(!1);d.incrementCount("map-tracking-failsafed",r);d.logError({feature:"map-tracking-failsafed-log",message:"Map failsafed for tracking Id: "+l.trackingId})}}),d.incrementCount("map-tracking-map-initialized",r),h.MapTracker.init({container:"mapTracker",trackingId:l.trackingId,appId:"AMZL",
onChange:t}));fa=!0;G()}function t(a){ga=a;ba=!1;a&&a.message&&("string"===typeof a.message?d.logError({feature:"map-tracking-event-log",message:"Map event received for tracking Id: "+l.trackingId+" with message ["+a.message+"] and url ["+a.url+"]"}):"object"===typeof a.message&&a.message.statusText&&d.logError({feature:"map-tracking-event-log",message:"Map event received for tracking Id: "+l.trackingId+" with message ["+JSON.stringify(a.message)+"] and url ["+a.url+"]"}));switch(a.status){case e.RENDERED:S=
!0;n.hasFired()?(d.incrementCount("map-tracking-failsafed-prematurely",r),d.incrementCount("map-tracking-failsafed-latency-"+Math.floor(n.totalElapsedTime()/1E3),r),d.logError({feature:"map-tracking-failsafed-prematurely-log",message:"Map failsafed prematurely for tracking Id: "+l.trackingId})):n.reset();d.startWidgetTimer("map-tracking-map-dwell-time");d.incrementCount("map-tracking-map-rendered",r);break;case e.ERROR:S?d.incrementCount("map-tracking-error"):(n.extend(),d.incrementCount("map-tracking-error-pre-render",
r));break;case e.FATAL:S?(F({secondaryStatus:""}),J({calloutMessage:""}),M(),T(),d.incrementCount("map-tracking-fatal",r)):(n.reset(),L(!1),d.incrementCount("map-tracking-fatal-pre-render",r));D(!1);a.message&&("string"===typeof a.message?(d.incrementCount("map-tracking-fatal-"+a.message.toLowerCase().replace(/[\s_]+/g,"-"),r),d.logError({feature:"map-tracking-fatal-log",message:"Map received fatal message ["+a.message+"] with url ["+a.url+"] for tracking Id: "+l.trackingId})):"object"===typeof a.message&&
a.message.statusText&&(d.incrementCount("map-tracking-fatal-"+a.message.statusText.toLowerCase().replace(/[\s_]+/g,"-"),r),d.logError({feature:"map-tracking-fatal-log",message:"Map received fatal message ["+JSON.stringify(a.message)+"] with url ["+a.url+"] for tracking Id: "+l.trackingId})));break;case e.ADDRESS_NOT_FOUND:S?(F({secondaryStatus:""}),J({calloutMessage:""}),D(!1),M(),T(),d.incrementCount("map-tracking-address-not-found",r)):(n.reset(),L(!1),D(!1),d.incrementCount("map-tracking-address-not-found-pre-render",
r));break;default:p.is(":visible")?V(a):d.incrementCount("map-tracking-memoization-skipped")}}function V(a){ba=!0;c(a,l,ha,u,v)}function u(a){ha++;W=a;X=null;switch(a.status){case e.PICKED_UP:case e.YOU_ARE_NEXT:null!==K&&0>K&&d.incrementCount("map-tracking-skipped-stop-became_healthy");K=a.stops;F(a);J(a);D(!0);U=!1;break;case e.SKIPPED_STOP:null===K?d.incrementCount("map-tracking-skipped-stop-landing"):-1<K&&(d.incrementCount("map-tracking-skipped-after-[#]-stops".replace("[#]",K)),d.incrementCount("map-tracking-skipped-stop-after-healthy"),
K=-1);F(a);J(a);D(!0);U=!1;break;case e.PARTIALLY_DELIVERED:case e.DELIVERY_ATTEMPTED:case e.NOT_DELIVERED:case e.REJECTED:O(a);F(a);J(a);ca();D(!1);M();T();d.incrementCount("map-tracking-"+a.status.toLowerCase().replace(/_/g,"-"));break;case e.DELIVERED:O(a),F(a),J(a),ca(),D(!1),M(),null===U?d.incrementCount("map-tracking-already-delivered"):!1===U&&d.incrementCount("map-tracking-became-delivered"),U=!0,f(l,function(){h.location.reload()},function(a){})}}function v(a){W=null;X=a;switch(a){case g.NOT_AUTHENTICATED:ia||
(F({secondaryStatus:0<ea.length?ea.html():"",emphasized:!0}),D(!1),M(),T(),ca(),ia=!0,d.incrementCount("map-tracking-sign-in-again"));break;case g.INVALID_TOKEN:ja||(F({secondaryStatus:""}),J({calloutMessage:""}),D(!1),M(),T(),ja=!0,a=(((new Date).getTime()-b.loadedAt)/100).toFixed(1),d.incrementCount("map-tracking-invalid-token"),d.logError({feature:"map-tracking-invalid-token-log",message:"Invalid csrf token ("+h.csrfToken.length+":"+a+")"}))}}function G(){"mobile"===l.deviceType?(C.length&&C.hide(),
w.length&&w.hide(),h.scrollTo(0,0),a.$("body, html").bind("touchmove",function(a){a.preventDefault()},!1)):(Y.length&&Y.hide(),Z.length&&Z.fadeIn("slow"));y.length&&y.hide();p.fadeIn("slow");z.length&&z.fadeIn("slow");ba?W?u(W):X&&v(X):V(ga)}function L(b){"mobile"===l.deviceType?(C.length&&C.fadeIn("slow"),w.length&&w.fadeIn("slow"),a.$("body, html").unbind("touchmove"),a.$("body, html").unbind("touchstart")):(Y.fadeIn("slow"),Z.attr("style","display: none !important"));b?y.length&&y.show():(y.length&&
y.hide(),S&&Q.length&&Q.show());p.hide();z.length&&z.hide();l.keepSecondaryUntouched||I.html(l.mapTracking.originalSecondaryStatus||"")}function O(a){(a.primaryStatus||""===a.primaryStatus)&&R.html(a.primaryStatus)}function F(a){!p.is(":visible")||l.keepSecondaryUntouched||!a.secondaryStatus&&""!==a.secondaryStatus||(I.html(a.secondaryStatus),a.emphasized?I.addClass("text-emphasized"):I.removeClass("text-emphasized"))}function J(a){l.keepSecondaryUntouched&&null!==l.mapTracking&&null!==l.mapTracking.calloutMessage&&
""!==l.mapTracking.calloutMessage&&(a.calloutMessage||""===a.calloutMessage)&&h.MapTracker.updateDeliveryAgentBubble({content:a.calloutMessage})}function P(){0===N?x.html(l.mapTracking.updatedNow):x.html(l.mapTracking.updatedPluralSecondsAgo.replace("[#]",N));N+=ka;60<N?x.addClass("text-emphasized"):x.removeClass("text-emphasized");180<N&&L(!1)}function M(){0<x.length&&x.animate({opacity:0},1E3,function(){x.hide()})}function ca(){0<A.length&&A.animate({opacity:0},1E3,function(){A.hide()})}function T(){aa.length&&
aa.animate({opacity:.2},1E3);d.startWidgetTimer("map-tracking-map-zombie-time")}function D(a){N=0;da&&clearInterval(da);a&&(P(),da=setInterval(P,1E3*ka))}function la(){setTimeout(function(){location.reload()},m+1E4)}var ia=!1,ja=!1,K=null,S=!1,U=null,ba=!0,ga=null,W=null,X=null,ha=0;ma?L(!0):B();0<m&&la();a.declarative("mapTracking-show-map","click",function(a){a=a.$currentTarget.find("a").data("ref");B();d.recordReftag(h.jQuery,a)});a.declarative("mapTracking-hide-map","click",function(a){a=a.$currentTarget.find("a").data("ref");
L(!0);d.recordReftag(h.jQuery,a)});var N=0,ka=10,da=null;D(!0)})}catch(u){d.incrementCount("map-tracking-error-generic"),d.logError({error:u,feature:"map-tracking-error",message:"map tracking failed for "+l.trackingId})}}else d.incrementCount("map-tracking-warn-map-tracking-container"),d.logWarn({feature:"map-tracking-warn",message:"pageState.mapTracking exists but $mapContainer does not for "+l.trackingId})}});"use strict";k.when("A","a-sheet","pt2-page-utils","pt2-csm-metrics-utils","ready").register("configure-mapTracking-bsheet",
function(a,b,c,f){var e=a.$,g;a.declarative("mapTracking-open-bottom-sheet",["click","mouseleave","touchend"],function(d){var c=d.$currentTarget.find("a").data("ref");g||(d=a.extend({},d.data),d.height=.75*h.innerHeight,d.preloadDomId="mapTracking-bottomSheet-container",d.name="mapTracking-bottom-sheet",d.sheetType="web",d.closeType="icon",g=b.create(d));g.show();f.recordReftag(e,c)});a.on("a:sheet:beforeShow:mapTracking-bottom-sheet",function(a){c.modifyPageScrollStatus(!0)});a.on("a:sheet:beforeHide:mapTracking-bottom-sheet",
function(a){c.modifyPageScrollStatus(!1)})});"use strict";k.declare("maptracker-url",{url:"https://do6e2c3moa96p.cloudfront.net/MapTracker.js"});"use strict";k.when("A","page-load","pt2-csm-metrics-utils","ready").execute(function(a,b,c){a=a.$;0<a("#photoOnDelivery-container").length&&c.incrementCount("photo-on-delivery-container-present",{browser:!0})});k.when("A","a-modal","pt2-csm-metrics-utils","sign-in-again-or-do","ready").register("configure-photo-on-delivery-modal",function(a,b,c,f){var e=
a.$;a.declarative("photo-on-delivery-open-modal","click",function(g){var d=a.extend({},g.data);f(g,b,"sign-in-again-modal",d,function(){var a=g.$currentTarget,f=a.find("a").data("ref");d.width=620>h.innerWidth?.75*h.innerWidth:600;d.name="photo-on-delivery-"+a.find("a").data("form")+"-modal";d.dataStrategy="preload";b.create(a,d).show();c.recordReftag(e,f)})})});k.when("A","a-secondary-view","pt2-csm-metrics-utils","sign-in-again-or-do","ready").register("configure-photo-on-delivery-secondary-view",
function(a,b,c,f){var e=a.$;a.declarative("photo-on-delivery-open-sec-view","click",function(g){var d=a.extend({},g.data);f(g,b,"sign-in-again-secondary-view",d,function(){var a=g.$currentTarget,f=a.find("a").data("ref");d.name="photo-on-delivery-"+a.find("a").data("form")+"-secondary-view";d.dataStrategy="preload";b.create(a,d).show();c.recordReftag(e,f)})})});k.when("A","a-alert","a-button","pt2-csm-metrics-utils").execute(function(a,b,c,f){var e=a.$,g=e("#photoOnDelivery-feedback-textarea");e(document).keyup(function(a){a=
c("#photoOnDelivery-feedback-submitBtn");var b=g.val();P(b)?a.disable():a.enable()});a.declarative("submit-photo-on-delivery-feedback","click",function(d){d.$event.preventDefault();var h=O(d.data),k=e("#photoOnDelivery-feedback-secondary-view-trigger"),l=e("#photoOnDelivery-feedback-modal-trigger");if(!P(g.val())){var m=q("submit-photo-on-delivery-feedback",d.data);m.feedback=g.val();var p=f.setScope("pt2PodFeedbackAjaxLatencyScope");f.setPreAjax(p);d=d.$currentTarget.find("input").data("ref");a.post("/progress-tracker/package/actions/photo-on-delivery?"+
d,{params:m,success:function(a){a.success&&a.value?(t(e,b,h.feedbackSuccessHeading,h.feedbackSuccessMessage,"1"),g.val(""),c("#photoOnDelivery-feedback-submitBtn").disable()):t(e,b,h.feedbackErrorHeading,h.feedbackErrorMessage,"0");"mobile"===h.deviceType?u(e,k):v(e,l);f.setPostAjax(p);f.sendAjaxMetrics(p)},error:function(a){t(e,b,h.feedbackErrorHeading,h.feedbackErrorMessage,"0");"mobile"===h.deviceType?u(e,k):v(e,l);f.setPostAjax(p);f.sendAjaxMetrics(p)}})}});a.declarative("submit-photo-on-delivery-optout",
"click",function(d){d.$event.preventDefault();var c=O(d.data),f=e("#photoOnDelivery-optout-secondary-view-trigger"),g=e("#photoOnDelivery-optout-modal-trigger"),h=q("submit-photo-on-delivery-optout",d.data);d=d.$currentTarget.find("input").data("ref");a.post("/progress-tracker/package/actions/photo-on-delivery?"+d,{params:h,dataType:"json",success:function(a){a.success&&a.value?(t(e,b,c.optOutSuccessHeading,c.optOutSuccessMessage,"1"),e("#photoOnDelivery-container").detach()):t(e,b,c.optOutErrorHeading,
c.optOutErrorMessage,"0");"mobile"===c.deviceType?u(e,f):v(e,g)},error:function(a){t(e,b,c.optOutErrorHeading,c.optOutErrorMessage,"0");"mobile"===c.deviceType?u(e,f):v(e,g)}})})});"use strict";k.when("A","cookie-monster","ready").register("update-my-address",function(a,b){function c(){r=new H.map.Marker({lat:m.latitude,lng:m.longitude});r.draggable=!0;h.addObject(r);h.addEventListener("dragstart",function(a){a.target instanceof H.map.Marker&&C.disable()},!1);h.addEventListener("dragend",function(a){m=
{latitude:r.b.lat,longitude:r.b.lng};a.target instanceof mapsjs.map.Marker&&C.enable()},!1);h.addEventListener("drag",function(a){var b=a.target;a=a.currentPointer;b instanceof mapsjs.map.Marker&&b.setPosition(h.screenToGeo(a.viewportX,a.viewportY))},!1)}function f(b,d,f,g){k=document.getElementById(b);l=a.$(d);l.click(e);p=m=f;w=g||14;b=(new H.service.Platform({app_id:"FS1rcDYpsifo3E1tyXb6",app_code:"uMJ-il_IZ-9B_fkF-BpsUg",useCIT:!0,useHTTPS:!0})).createDefaultLayers();k.innerHTML="";h=new H.Map(k,
b.normal.map,{center:{lat:m.latitude,lng:m.longitude},zoom:w});C=new H.mapevents.Behavior(new H.mapevents.MapEvents(h));H.ui.UI.createDefault(h,b,"en-US");c()}function e(a,b){h.setCenter({lat:m.latitude,lng:m.longitude},!0);setTimeout(function(){alert("Will make an ajax call to save the updated geocode and display a success message here.");b&&b()},500)}function g(b,d){var c={};a.$.ajax({url:"https://securephotostorageservice-na-external.amazon.com/DEANSExternalPackageLocationDetailsProxy/trackingObjectId/"+
b+"/clientName/AMZL",headers:{"x-amzn-SessionId":q},dataType:"json",xhrFields:{withCredentials:!0},success:function(a){null!=a&&a.destinationAddress&&a.destinationAddress.geoLocation?(c.success=!0,c.geocode={latitude:a.destinationAddress.geoLocation.latitude,longitude:a.destinationAddress.geoLocation.longitude}):c.success=!1;d&&d(c)},error:function(a,b,e){c.success=!1;d&&d(c)}})}function d(a,b){var d={success:!1};setTimeout(function(){b&&b(d)},500)}var h,k,l,m,p,r,C,w,q;return{init:function(a){(q=
b.get("session-id"))||console.log("sessionId cookie not present");if(!a)return console.log("options is required"),!1;if("object"!==typeof a)return console.log("options must be an object"),!1;if(!a.mapContainerId)return console.log("options.mapContainerId is required"),!1;if(!a.submitButtonSelector)return console.log("options.submitButtonSelector is required"),!1;if(a.position&&a.position.latitude&&a.position.longitude)f(a.mapContainerId,a.submitButtonSelector,a.position,a.zoom);else if(a.addressId)d(a.addressId,
function(b){if(!b||!b.success)return!1;f(a.mapContainerId,a.submitButtonSelector,b.geocode,a.zoom)});else if(a.trackingId)g(a.trackingId,function(b){if(!b||!b.success)return!1;f(a.mapContainerId,a.submitButtonSelector,b.geocode,a.zoom)});else return console.log("options.position or options.addressId or options.trackingId is required for the marker on the map"),!1},resetMap:function(){m=p;r.setPosition({lat:m.latitude,lng:m.longitude});h.setCenter(position,!0)},getPosition:function(){return m}}});
k.when("A","a-modal","update-my-address","pt2-csm-metrics-utils","ready").register("configure-update-my-address-modal",function(a,b,c,f){var e=a.state("page-state")||{};a.declarative("update-my-address-open-modal","click",function(f){var d=a.extend({},f.data);f=f.$currentTarget;d.width=620>h.innerWidth?.75*h.innerWidth:600;d.name="update-my-address-modal";d.dataStrategy="preload";d.header=f.find("a").html();b.create(f,d).show();c.init({mapContainerId:"updateMyAddress-map",submitButtonSelector:"#updateMyAddress-submit",
trackingId:e.trackingId})})});k.when("A","a-secondary-view","update-my-address","pt2-csm-metrics-utils","ready").register("configure-update-my-address-secondary-view",function(a,b,c,f){var e=a.state("page-state")||{};a.declarative("update-my-address-open-secondary-view","click",function(f){var d=a.extend({},f.data);f=f.$currentTarget;d.name="update-my-address-secondary-view";d.dataStrategy="preload";d.header=f.find("a").html();b.create(f,d).show();c.init({mapContainerId:"updateMyAddress-map",submitButtonSelector:"#updateMyAddress-submit",
trackingId:e.trackingId})})});"use strict";k.when("A","pt2-csm-metrics-utils","ready").register("pdw-update-customer-views",function(a,b){function c(a,d,c,k){a.post(f,{params:{trackingId:e.trackingId,updateReason:d,csrfToken:h.csrfToken},dataType:"json",success:function(a){a.success&&a.value?b.incrementCount(c):b.incrementCount(k)},error:function(a){b.incrementCount(k)}})}var f=-1!==h.location.host.indexOf("hp-shoppingportal")?"/portal/cstrac/progress-tracker/actions/predicted-delivery-window":"/progress-tracker/package/actions/predicted-delivery-window",
e=a.state("page-state")||{};switch(e.promise?e.promise.secondaryPromiseIdentifier:"NONE"){case "PDW":c(a,"SHOWN","pt2-pdw-shown-updated","pt2-pdw-shown-not-updated");break;case "MISSED_PDW":c(a,"MISSED","pt2-pdw-missed-updated","pt2-pdw-missed-not-updated");break;case "NONE":b.incrementCount("pt2-pdw-no-secondary-promise")}});"use strict";k.when("A","pt2-tooltip","ready").register("pdw-tooltip",function(a,b){a=a.$;var c=a(".pt2-tooltip-trigger.pdw-tooltip-trigger");c.length&&(a("#secondaryStatus .nowrap").last().append(c),
b("pdw-tooltip-trigger"))});"use strict";k.when("A","pt2-csm-metrics-utils","cookie-monster","ready").register("dataDiscrepancyLogger",function(a,b,c){function f(a,d,c,f){var e=a;if("PrimaryStatus"===a){var e=k(d),h=k(c),e=e!==h?-1<d.indexOf("-")&&-1<c.indexOf("-")?"PrimaryStatus:RangeValue":-1<d.indexOf("-")||-1<c.indexOf("-")?"PrimaryStatus:DateType":"PrimaryStatus:DateValue":"PrimaryStatus:MessageString";b.incrementCount(e+"Mismatch:"+A);b.incrementCount(a+"Mismatch:"+A)}else b.incrementCount(a+
"Mismatch:"+A+":YO:"+d+":PT:"+c);b.logError({feature:f,message:e+"MismatchError: orderId\x3d"+m.orderId+", shipmentId\x3d"+p+", packageIndex\x3d"+r+", itemId\x3d"+C+", fulfillmentType\x3d"+A+', YO\x3d"'+d+'", PT\x3d"'+c+'"'})}function e(a){var b=/^([A-z\s]+) ([A-z\,]{4}) ([a-zA-Z0-9]+) ([a-zA-Z0-9]+)$/;return b.test(a)?a.replace(b,"$1 $3 $4"):a}function h(a){return"USAmazon"===w?d(a,t,y,x):"GBAmazon"===w?d(a,u,Q,z):a}function d(a,b,d,c){return-1<a.indexOf("-")?b.test(a)?a.replace(b,"$1 $2 $3 - $4 $5"):
a:d.test(a)?a.replace(d,"$1 $2 $3"):c.test(a)?a.replace(c,"$1 $3 $4"):a}function k(a){return"USAmazon"===w?q(a,t,y,x):"GBAmazon"===w?q(a,u,Q,z):a}function q(a,b,d,c){return-1<a.indexOf("-")?b.test(a)?a.replace(b,"$2 $3 - $4 $5"):a:d.test(a)?a.replace(d,"$2 $3"):c.test(a)?a.replace(c,"$3 $4"):a}function l(){var a="GBAmazon"===w?"en-GB":"en-US",b=new Date;b.setDate(b.getDate()-1);return b.toLocaleDateString(a,{month:"short",day:"numeric"})}var m=a.state("page-state")||{},p=m.shipmentId||"",r=m.packageIndex||
"",C=m.itemId||"",w=m.realm||"",t=/^([A-z\s]+) ([A-Z][a-z]{2})[a-z]* ([0-9]{1,2}) - ([A-Z][a-z]{2})[a-z]* ([0-9]{1,2})$/,u=/^([A-z\s]+) ([0-9]{1,2}) ([A-Z][a-z]{2})[a-z]* - ([0-9]{1,2}) ([A-Z][a-z]{2})[a-z]*$/,y=/^([A-z\s]+) ([A-Z][a-z]{2})[a-z]* ([0-9]{1,2})$/,Q=/^([A-z\s]+) ([0-9]{1,2}) ([A-Z][a-z]{2})[a-z]*$/,x=/^([A-z\s]+) ([A-z\,]*) ([A-Z][a-z]{2})[a-z]* ([0-9]{1,2})$/,z=/^([A-z\s]+) ([A-z\,]*) ([0-9]{1,2}) ([A-Z][a-z]{2})[a-z]*$/;c=c.getJson("yoShipmentInfo");if(!a.$.isEmptyObject(c)){var A=
m.isMfn?"MFN":"AFN";a=c.primaryStatus;var R=m.promise&&m.promise.promiseMessage?m.promise.promiseMessage:"";if(a&&R){var I=h(R).toLowerCase().replace(/\s/g,""),B=e(a).toLowerCase().replace(/\s/g,""),v=new RegExp(I),G=new RegExp(B);"deliveredyesterday"===B&&(B=B.replace(/yesterday/,l()).toLowerCase().replace(/\s/g,""));v.test(B)||G.test(I)||f("PrimaryStatus",a,R,"pt-primary-status-discrepancy-logger")}c=c.shortStatus;a=m.shortStatus;c&&a&&c!==a&&f("ShortStatus",c,a,"pt-short-status-discrepancy-logger")}});
"use strict";k.when("A","a-modal","pt2-csm-metrics-utils","ready").register("configure-customer-delivery-profile-modal",function(a,b,c){var f=a.$;a.declarative("customer-delivery-profile-modal-link","click",function(e){e.$event.preventDefault();var g=a.extend({},e.data);e=e.$currentTarget;var d=e.find("a").data("ref");g.width=620>h.innerWidth?.75*h.innerWidth:600;g.url=e.find("a").attr("href");g.dataStrategy="ajax";b.create(e,g).show();c.recordReftag(f,d)})});k.when("A","a-secondary-view","pt2-csm-metrics-utils",
"ready").register("configure-customer-delivery-profile-sec-view",function(a,b,c){var f=a.$;a.declarative("customer-delivery-profile-sec-view-link",["click"],function(e){e.$event.preventDefault();var h=a.extend({},e.data);e=e.$currentTarget;var d=e.find("a").data("ref");h.url=e.find("a").attr("href");h.dataStrategy="ajax";b.create(e,h).show();c.recordReftag(f,d)})});"use strict";k.when("A","pt2-csm-metrics-utils","ready").register("banner-metric-publisher",function(a,b){var c=a.$;c("body").delegate(".packageTrackerFooterBannerLink",
"click",function(){var a=c(this).data("clickMetricName");a&&b.incrementCount(a)})});"use strict";k.when("A","pt2-csm-metrics-utils","ready").register("Promise",function(a,b){function c(){setTimeout(function(){b.incrementCount("pt2-refresh-page-on-predicted-delivery-window-end");location.reload()},f+1E4)}var f=(a.state("page-state")||{}).timeUntilPredictedDeliveryWindowEnd;0<f&&c()});"use strict";k.when("A","pt2-csm-metrics-utils","share-tracking-confirmation","mash","response-code","a-sheet","ready").register("pt2-share-package-tracking-information",
function(a,b,c,f,e,g){function d(a){a&&(k.execute("pt-hide-share-package-tracking-information-bottom-sheet",function(){g.get("shareTracking-bottom-sheet").hide()}),m||(b.recordReftag(q,l),c(a,function(){h.location.reload()},function(a){}),m=!0))}function n(a){return!a||0===a.length||!a.trim()}var q=a.$,l,m=!1;a.declarative("pt-share-package-tracking-information-click",["click"],function(c){c.$event.preventDefault();var g=c.$currentTarget;c=a.extend({},c.data);var k=c.message4096CharLimit,m=c.message160CharLimit,
t=c.message140CharLimit,u=g.find("a").data("imageurl"),y=c.messageSubject,v=g.find("a").data("url"),x=g.find("a").data("sharetype");c=g.find("a").data("clickref");l=g.find("a").data("shareref");b.recordReftag(q,c);if(k&&m&&t&&u&&v&&y){var z=k.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26apos;"),A={url:encodeURIComponent(v),csrfToken:h.csrfToken};a.post("/progress-tracker/package/actions/tiny-url",{params:A,success:function(c){a.state("page-state",
{shareTrackingType:x});var g=c.value;if(!c.success&&(b.incrementCount("tiny-url-ajax-error"),c.value&&e.INVALID_TOKEN==c.responseCode)){g=c.value;c=a.state("page-state")||{};b.incrementCount("tiny-url-invalid-token-error");c=c.signInRedirectUrl.split("?");g=g+"?useRedirectOnSuccess\x3d1\x26path\x3d"+c[0]+"\x26query\x3d"+encodeURIComponent(c[1]);h.location.href=g;return}c={messagePlain160:m+" "+g,messagePlain140:t+" "+g,messageHTML:"\x3chtml\x3e\x3cbody\x3e"+z+'\x3ca href\x3d"'+g+'"\x3e '+g+"\x3c/a\x3e\x3c/body\x3e\x3c/html\x3e",
messagePlain:k+" "+g,subject:y,url:g,imageURL:u,shareServiceSelectedCallback:d};var l=A.url;g&&50<g?b.incrementCount("non-tiny-url-passed-to-mash"):n(g)?(b.incrementCount("no-url-passed-to-mash"),b.logError({feature:"mash-share-url-error",message:"no url passed to mash share api for pt url: "+v+" , encoded url: "+l})):b.incrementCount("tiny-url-passed-to-mash");(n(c.messagePlain140)||n(c.messagePlain160)||n(c.messagePlain)||n(c.subject))&&b.incrementCount("missing-text-for-mash");f.share(c)},error:function(a){}})}})});
k.when("A","a-sheet","pt2-csm-metrics-utils","ready").register("pt2-configure-share-package-tracking-bottomsheet",function(a,b,c){var f=a.$,e,g=f("#shareTracking-bottomSheet");a.declarative("pt-open-share-package-tracking-information-bottom-sheet",["click"],function(d){e||(d=a.extend({},d.data),c.recordReftag(f,d.ref),d.preloadDomId="shareTracking-bottomSheet",d.name="shareTracking-bottom-sheet",g.appendTo("body"),g.addClass("aok-offscreen"),g.removeClass("aok-hidden"),d.height=g.outerHeight(!0),
g.addClass("aok-hidden"),g.removeClass("aok-offscreen"),d.sheetType="web",d.closeType="icon",e=b.create(d),a.capabilities.ios?f(".pt-share-icon").css("background-image","url('https://m.media-amazon.com/images/G/01/x-locale/cs/ship-track/pt2/share-ios.svg')"):f(".pt-share-icon").css("background-image","url('https://m.media-amazon.com/images/G/01/x-locale/cs/ship-track/pt2/share-android.svg')"));e.show()});a.on("a:sheet:beforeShow:shareTracking-bottom-sheet",function(a){g.parent().addClass("shareTracking-bottomSheet-container")})});
k.when("A","ready").register("share-tracking-confirmation",function(a){return function(b){b=a.state("page-state")||{};var c={trackingId:b.trackingId,csrfToken:h.csrfToken};b.shareTrackingType&&(c.shareTrackingType=b.shareTrackingType);b.customerId&&(c.customerId=b.customerId);b.visitTrigger&&(c.visitTrigger=b.visitTrigger);setTimeout(function(){function b(e){a.post("/progress-tracker/package/actions/share-tracking",{params:c,success:function(a){},error:function(a){3>e&&setTimeout(function(){b(e+1)},
1E3)}})}b(0)},0)}});k.when("A","huddles-chatbox","pt2-csm-metrics-utils","ready").execute(function(a,b,c){a.declarative("render-huddles-chat","click",function(f){var e=a.$,g=f.$currentTarget.find("a").data("ref");b.renderHuddleChat(a.$.extend({},f.data,{showEmbedded:!1}));c.recordReftag(e,g)})});"use strict";k.when("A","preload-images","ready").register("render-images-carousel",function(a,b){a=[];var c=document.getElementById("itemImagesCarousel-container");if(null!==c&&(c=c.querySelectorAll("img"),
0<c.length))for(var f=0;f<c.length;f++){var e=c[f];e.src&&0<e.src.length&&a.push(e.src)}b.preloadImages(a)})});